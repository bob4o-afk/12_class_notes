# Embedded System (Вградена система)

Устройство, което съдържа микроконтролер и е специализирано за извършване на специфични задачи. Пример за вградени системи включва: микровълнови фурни, роботи, автомобилни системи и др.

## Микроконтролер vs Микропроцесор

| **Критерий**            | **Микроконтролер (MCU)** | **Микропроцесор (CPU)** | **Обяснение**                                                                                   |
|-------------------------|--------------------------|--------------------------|-------------------------------------------------------------------------------------------------|
| **Изчислителен ресурс**  | Малък                    | Голям                    | MCU имат ограничени изчислителни възможности, докато CPU са проектирани за висока производителност.|
| **Брой транзистори**     | Малко                    | Много                    | MCU имат по-малко транзистори за по-ниска сложност и по-ниска консумация на енергия. CPU имат повече транзистори за по-голяма изчислителна мощност. |
| **Вградена RAM**         | Да                       | Не* (има cache)           | Микроконтролерите имат вградена RAM за основни операции, докато CPU обикновено използват външна RAM, допълнена с кеш. |
| **Вградена ROM**         | Да*                      | Не*                      | MCU имат вграден ROM за съхранение на инструкции, докато CPU разчитат на външна памет за съхранение на програмен код. |
| **Виртуална памет**      | Не*                      | Да                       | CPU поддържат виртуална памет, което им позволява да използват по-големи количества оперативна памет. |
| **Периферни модули**     | Много                    | Малко                    | MCU имат вградени периферни модули като таймери, ADC, и PWM, докато CPU използват външни устройства за тези функции. |

\* Има някои изключения

### Примери:

- **Микроконтролер (MCU):** Arduino, ESP32, STM32
- **Микропроцесор (CPU):** Intel Core i7, AMD Ryzen, ARM Cortex-A

## Как се изчислява колко бита е системата?

За да определим колко бита е дадена система, можем да разгледаме ширината на шината, използвана от процесора. Например:

- **8-битова система:** Микроконтролерът обработва 8 бита наведнъж (например AVR микроконтролери).
- **16-битова система:** Обработва 16 бита наведнъж (например MSP430).
- **32-битова система:** Обработва 32 бита наведнъж (например STM32).

## Тактова честота и изпълнение

- **Такт** - Това е една единична стъпка в работата на процесора, определяна от неговата тактова честота (честотата на осцилатора). Например 1 GHz означава 1 милиард такта в секунда.
- **АЛУ (Аритметико-логическо устройство):** То обработва зададените битове във всеки такт. Пример: 8-битова АЛУ може да обработва 8 бита за един такт.
  
  Например, ако процесорът е 8-битов и има тактова честота от 16 MHz, това означава, че той може да извършва 16 милиона операции за секунда, като всяка операция обработва 8 бита.

## Pipeline (Конвейер)

**Конвейерът** е техника за подобряване на производителността, като позволява едновременното изпълнение на различни стъпки от обработката на инструкциите. При тази техника инструкциите са разделени на няколко етапа (напр. извличане на инструкция, декодиране, изпълнение и запис), които се изпълняват успоредно. Това увеличава скоростта на изпълнение на програмата.

## Архитектури на памет

### Архитектура на фон Нойман

- **Общо описание:** Данните и инструкциите се съхраняват в една и съща памет. Процесорът извлича както данните, така и инструкциите от една и съща шина.
- **Предимства:** Определена простота в дизайна.
- **Недостатъци:** Възниква т.нар. "bottleneck" (тясно място), където процесорът може да бъде забавен, защото може да чете или инструкции, или данни в даден момент, но не и двете едновременно.

### Харвардска архитектура

- **Общо описание:** Паметта за инструкции и паметта за данни са отделни и се използват различни шини за достъп до тях.
- **Предимства:** Процесорът може да чете инструкции и данни едновременно, което подобрява производителността.
- **Недостатъци:** По-сложен дизайн и може да изисква повече памет.

### Пример за харвардска архитектура:
- **Микроконтролерът** STM32 използва харвардска архитектура, при която инструкциите и данните са отделени и се достъпват поотделно.


## Platformio
- https://docs.platformio.org/en/latest/integration/ide/vscode.html#ide-vscode-toolbar