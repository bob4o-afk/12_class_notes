1. Прекъсвания

attachInterupt

Разлика между RISING  and falling

Събитие се случва, което процессора трябва да обработи най-бързо и прекъсва процеса който е сега

- запазва текущия процес в stack-а 
- изпълнява interupt-та
- връща се към текущия процес

- външно/хардуерно
- софтуерно -> пример за грешки:
    - Segmentation fault
    - делене на нула
    -> иначе sys calls
- като дойде пакет по uart, i2c - може да доведе до прекъсваме


voatile - компилатора прави оптимизации, които чупят кода (маха променливата) и затова преди променливата слагаме тая дума 

трябва в прекъсванията да са кратки 
да НЕ ползваме в тях:
- delay
- Serial.print 
- show метода на neopixel arduino


възможно е да имаме nested прекъсвания НООО при ардуино не работят прекъсвания, които са прекъсани от прекъсвания
в други контролери може да имаме приоритетни прекъсвания, а ако дойдат с една и съща приоритизация се ползва номер на прекъсването


2. Interfaces
Видове:
- Simplex
- Half-dublex
- Full-dublex

- peer to peer
- master slave /i2c, spi


- серийни 
- паралелен - едновременно се пращат множество битове, на множество проводници
- хибридни - сноп от серийни интерефейси на множество проводници


- синхронни - сигнал за данни + сигнал за тактова честота (сигнал за кога трябва да четем)
- асинхронни - сигнала за тактова честота не се праща отделно/директно а е кодиран в сигнала за данни и оттам може да се извелче
UART, Ethernet


по физическа среда:
- по оптичен кабел
- по медна жица



bit rate - колко информация се предава за секудна
baud rate - Колко символа се предават за секунда


3. светодиодни ленти
вързани са:
изхода на първия с входа на втория и т.н

пращаме 3 байта на цвета на първия и си ги запазва
после пращаме още 3 байта и те се записват във втория
и т.н

show method - павен

4. Servo библиотека
servoAttach
servoWrite

5. GPIO и регистри
Как да прочетем 4 пина едновременно

Data direction register - вход или изход
Port register - ако е изход / какво е нивото
Pin -  входно - какво има/ четем, нооо когато искаме Pull up resistor ако искаме - трябва единица 



6. Мотори
H-bridge - на кръст отпушваме за да върви - на редица за спирачка

скорост - pwm

7. други
Idea:
Библиотека за таймери на ардуино


Вредно е човек да си бие ток с еднакъв поляриетет щото разместя електроритите  


Упражнение от тест:

![alt text](image.png)

```c
#include <Adafruit_NeoPixel.h>

#define PIN 7
#define NUMPIXELS 12

void button_pressed_ISR(void);

volatile uint8_t ledState = 0;

Adafruit_NeoPixel pixels(NUMPIXELS, PIN, NEO_GRB);


void setup() {
  // put your setup code here, to run once:
  pinMode(2, INPUT_PULLUP);
  attachInterrupt(digitalPinToInterrupt(2), button_pressed_ISR, FALLING);
  pixels.begin();
  pixels.setBrightness(50);
  	 pixels.setPixelColor(6, pixels.Color(255,255,0));
}

void loop() {
  pixels.show();
	
}


void button_pressed_ISR (){
  if(ledState){
    ledState = 0;
	 pixels.setPixelColor(6, 255, 255, 0);
  }else{
    ledState = 1;
	 pixels.setPixelColor(6, 0, 0, 255);

  }
}
```



timer interupt mask register
кои прекъсвания се задават от таймера

първо си спираме прекъсанията и таймера го зануляваме


ползва се за многозадачност