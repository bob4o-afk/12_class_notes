### **Интерфейси за жична комуникация**  

#### **Нискоскоростни интерфейси**  
*Скорост на предаване на информация (Bit Rate, BR) < 20 Mbps*  

1. **1-Wire**  
   - Използва една жичка и обща земя.  
   - Тип комуникация: **Half-Duplex**.  
   - Максимална скорост: **2 kbps**.  
   - Пример: Сензори за температура (напр. DS18B20).  

2. **UART (Universal Asynchronous Receiver/Transmitter)**  
   - Използва две жички:  
     - **TxD** – предаване на данни.  
     - **RxD** – приемане на данни.  
   - Тип комуникация: **Full-Duplex**.  
   - Максимална скорост: **100 kbps**.  
   - Пример: Комуникация между микроконтролери и периферия (напр. GPS модули).  

3. **SPI (Serial Peripheral Interface)**  
   - Използва четири жички и има йерархия:  
     - **Master** – инициатор на комуникацията.  
     - **Slave** – изпълнява команди.  
   - Жички:  
     - **MISO** (Master In Slave Out) – данни към Master.  
     - **MOSI** (Master Out Slave In) – данни от Master.  
     - **SCL** (Serial Clock) – синхронизация.  
     - **CS** (Chip Select) – активиране на slave устройство.  
   - Тип комуникация: **Full-Duplex**.  
   - Максимална скорост: **20 Mbps**.  
   - Пример: Управление на сензори или памети (напр. SD карти).  

4. **I2C (Inter-Integrated Circuit)**  
   - Използва две жички и също има йерархия:  
     - **Master** и **Slave**.  
   - Жички:  
     - **SDA** (Serial Data Line) – двупосочна линия за данни.  
     - **SCL** (Serial Clock Line) – синхронизация.  
   - Тип комуникация: **Half-Duplex**.  
   - Максимална скорост: **400 kbps** (или до 3.4 Mbps в High-Speed режим).  
   - Пример: Температурни сензори, екрани (напр. OLED).  

5. **RS485**  
   - Използва усукани жички:  
     - **Differential Pair** за елиминиране на шума.  
   - Максимална дължина: до 1.2 км.  
   - Пример: Индустриална автоматизация.  

6. **CANBUS (Controller Area Network)**  
   - Използва две усукани жички:  
     - **CAN H** (високо напрежение).  
     - **CAN L** (ниско напрежение).  
   - Информацията е диференциална, което минимизира шума.  
   - Пример: Автомобилни системи (напр. ABS, ECU).  

---

#### **Високоскоростни интерфейси**  
*Скорост на предаване на информация (BR) до 10 Gbps или повече*  

1. **USB (Universal Serial Bus)**  
   - Две усукани двойки:  
     - **TxD** и **RxD** за данни.  
   - Пример: Клавиатури, мишки, дискове.  

2. **Ethernet**  
   - Четири усукани двойки:  
     - **Tx1, Tx2** – предаване на данни.  
     - **Rx1, Rx2** – приемане на данни.  
   - Скорости: 100 Mbps (100BASE-T), 1 Gbps, 10 Gbps.  
   - Пример: Мрежови връзки.  

3. **SATA (Serial ATA)**  
   - Използва за свързване на дискове.  
   - Максимална скорост: 6 Gbps (SATA III).  

4. **PCIe (Peripheral Component Interconnect Express)**  
   - Високоскоростна връзка за вътрешни устройства.  
   - Пример: Графични карти, SSD.  

5. **CSI (Camera Serial Interface)**  
   - Използва се за високоскоростно предаване на видео.  
   - Пример: Камери в смартфони.  

---

### **Защо са нужни различни интерфейси?**

**Пример: Видео с камера**  
- Размер на изображение: **100 × 100 пиксела**.  
- Всеки пиксел съдържа **R, G, B стойност** (24 бита или 3 байта).  
  - Общ payload за кадър:  
    \[
    \text{Payload} = 100 \times 100 \times 24 = 240,000 \text{ бита } = 240 \text{ kB}
    \]  
- За видео с **25 FPS (кадъра в секунда)**:  
  \[
  \text{Payload per Second (FPS)} = 25 \times 240,000 = 6,000,000 \text{ бита } = 6 \text{ Mbps}
  \]  

**Пресмятане на времето за предаване:**  
- При BR = 100 kbps (UART):  
  \[
  t = \frac{\text{Payload}}{\text{BR}} = \frac{6 \times 10^6}{100 \times 10^3} = 60 \text{ секунди}
  \]  
  *Не е достатъчно бързо.*  

- При BR = 1 Gbps (Ethernet):  
  \[
  t = \frac{\text{Payload}}{\text{BR}} = \frac{6 \times 10^6}{1 \times 10^9} = 6 \text{ милисекунди}
  \]  
  *Подходящо за предаване в реално време.*  

**Заключение:**  
- Нискоскоростните интерфейси се използват за сензори и устройства, които не изискват голяма пропускателна способност.  
- Високоскоростните интерфейси са подходящи за приложения с големи данни като видео и мрежови устройства.  

---

### **Типове комуникация**

1. **Simplex**  
   - Еднопосочна комуникация.  
   - Пример: Радиопредаване.  

2. **Half-Duplex**  
   - Двупосочна, но по различно време.  
   - Пример: Уоки-токи.  

3. **Full-Duplex**  
   - Едновременно двупосочна.  
   - Пример: Телефонен разговор.  

---

### **Примерна схема за събиране на данни**

1. **Инициализация:**  
   - **Power On**.  
   - Настройка на системен часовник, интерфейси, таймери и GPIO.  

2. **Цикъл за четене:**  
   - Променлива `count = 0` (брояч на пакети).  
   - Четене на данни чрез функция:  
     - **Аргумент:** Handler на интерфейса.  
     - Данните се записват в масив: `array[count]`.  
   - Инкрементиране на брояча: `count++`.  

3. **Проверка на състоянието:**  
   - Ако `count = 100`:  
     - Изпращане на данните чрез функция `LoraTx`.  
     - Нулиране на брояча и масива.  
   - Ако не, продължава цикъла.  